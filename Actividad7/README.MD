# Completely Fair Scheduler (CFS)

Es el planificador de procesos predeterminado en el kernel de Linux desde la versión 2.6.23. Fue desarrollado por Ingo Molnar con el objetivo de proporcionar una distribución justa del tiempo de CPU entre todos los procesos en ejecución. 

CFS intenta emular un CPU multitarea ideal, donde cada tarea recibe una porción igual del tiempo de CPU. Esto se logra mediante el uso de un concepto llamado runtime virtual. Cada tarea tiene un valor de runtime virtual (vruntime), que representa el tiempo que la tarea debería haber ejecutado en un CPU ideal. CFS siempre selecciona para ejecución la tarea con el menor vruntime, es decir, la que ha ejecutado menos tiempo hasta el momento. CFS utiliza una estructura de datos de árbol rojo-negro para mantener las tareas ordenadas por su vruntime. Esto permite una inserción y eliminación eficiente de tareas, con una complejidad de O(log N), donde N es el número de tareas en la cola de ejecución. La granularidad del tiempo de CPU asignado a cada tarea se puede ajustar mediante el parámetro sched_granularity_ns. Además, CFS no utiliza intervalos de tiempo fijos (quantum), sino que ajusta dinámicamente el tiempo de ejecución de cada tarea según las necesidades del sistema.

CFS asigna tiempo de CPU a las tareas basándose en su vruntime. La tarea con el menor vruntime es la siguiente en ejecutarse. Esto asegura que todas las tareas reciban una cantidad justa de tiempo de CPU a lo largo del tiempo. Cada vez que una tarea ejecuta, su vruntime se incrementa en proporción al tiempo real que ha ejecutado. Las tareas que ejecutan menos frecuentemente tendrán un vruntime menor, lo que les da prioridad en futuras ejecuciones. Las tareas se insertan y eliminan del árbol rojo-negro basado en su vruntime. Esto permite que CFS mantenga un orden eficiente de las tareas y seleccione rápidamente la siguiente tarea a ejecutar. CFS también maneja sistemas multiprocesador, distribuyendo las tareas entre los diferentes núcleos de CPU para maximizar la eficiencia y el rendimiento del sistema.

